# DuckDB + Embeddings Demo

This project demonstrates how to use DuckDB to store and query text embeddings generated by a Hugging Face model (`sentence-transformers/all-MiniLM-L6-v2`).

It processes classic books (Project Gutenberg texts), embeds each line, and allows you to find similar lines based on semantic meaning.

This demo was created for the [evening of python coding](https://github.com/Jacob-Barhak/EveningOfPythonCoding) 

The books in the data are public domain and were downloaded from the [Project Gutenberg](https://www.gutenberg.org/) website.

The code is available on [GitHub](https://github.com/Jacob-Barhak/duckdb_demo) under [cc zero](https://choosealicense.com/licenses/cc0-1.0/) license. 

## Setup

This project uses `uv` for dependency management.

1.  **Install dependencies:**

    If you have `uv` installed:
    ```bash
    uv pip install -r requirements.txt
    ```
    
    Or with standard pip:
    ```bash
    pip install -r requirements.txt
    ```

## Usage

### 1. Prepare the Database

Run the `prepare.py` script to parse the text files in the `texts/` directory, generate embeddings, and store them in `embeddings.db`.

```bash
uv run prepare.py
```
*(This may take a few minutes as it downloads the model and processes the text)*

### 2. Search for Similar Texts

Run the `find.py` script to query the database. You can specify the number of results with `-n`.

```bash
uv run find.py -n 3
```

Enter a query when prompted (e.g., "traveling around the world" or "a deeply hidden secret"). 
Type `q` or `exit` to quit.

## Files

- `prepare.py`: Extract text, generate embeddings, create DuckDB table.
- `find.py`: Query the database using vector similarity.
- `texts/`: Directory containing source text files.
- `embeddings.db`: DuckDB database file (created by `prepare.py`).

## Requirements

- Python 3.8+
- `duckdb`
- `sentence-transformers`
- `numpy`
